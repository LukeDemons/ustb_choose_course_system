<!DOCTYPE html>
<html>
    <head>
      <title>北科大选课系统第三方客户端</title>
      <meta charset="UTF-8"/>
      <link rel='stylesheet' href='css/style.css' />
        <script type="text/javascript" src="js/vue.min.js"></script>
      <script type="text/javascript" src="js/date_format.js"></script>
      <script type="text/javascript" src="http://lib.sinaapp.com/js/jquery/1.9.1/jquery-1.9.1.min.js"></script>
      <script type="text/javascript" src="js/assign_comments.js"></script>
      <script type="text/javascript" src="js/assign_replys.js"></script>
      <script type="text/javascript" src="js/verifier.js"></script>
    </head>
    <body id="app">
        <h2>北科大选课系统第三方客户端</h2>
        <h3>功能：PC版(Window、Mac、Linux)支持退补选课，课表查询。移动版(Android、iOS)支持退补选课，预选课，课表查询，考试安排查询以及创新学分查询</h3>
        <h3>使用注意：登陆密码是选课系统的密码,不是本科教学网的密码</h3>
        <h3>软件说明：本软件为开源软件，目前UI比较简陋。</h3>
        <h3>源码地址：<a href="https://github.com/nladuo/ustb_choose_course_system">https://github.com/nladuo/ustb_choose_course_system</a></h3>
        <h3>下载列表：</h3>
        <table border="1">
            <thead>
                <tr>
                    <th>类别</th>
                    <th>当前版本</th>
                    <th>下载地址</th>
                    <th>说明</th>
                </tr>
            </thead>
            <tbody>
                <tr v-for="app in apps">
                    <td> {{app.TypeName}} </td>
                    <td> {{app.Version}} </td>
                    <td><a href="/download?id={{app.Id}}"> {{app.AppName}}  </a></td>
                    <td> {{app.Note}} </td>
                </tr>
            </tbody>
        </table>

    <div id="comments">
        <form name="commentform" onsubmit="return isCommentEmpty();" action="/add"  method="post" >
        <h3>对软件不满意？吐个槽：</h3>
        <p>
            <label for="comment">吐槽内容</label>
            <textarea name="comment" id="comment" placeholder="您可以在这里输入您的吐槽....." ></textarea>
        </p>
        <p id="name1">
            <label for="name">你的昵称</label>
            <textarea name="name" id="name" placeholder="输入您的昵称" ></textarea>
        </p>
        <input name="parent_id" type="hidden" value="0"  />
        <input name="replyer_name" type="hidden" value="  "  />
        <p><input id="submit" type="submit" value="发表吐槽"  /></p>
        </form>
        <section id="commentlist">
            <h3>吐槽列表：</h3>
            <h5 v-if="{{msgs.length == 0}}">暂无吐糟</h5>
            <ul id="comment_list"></ul>
        </section>
    </div>

    <div id="footer">
        <ul class="popular-posts">
            <center>
                Copyright&copy;2015&emsp;by 叁公子 &emsp;&emsp;Email:kalen25115@gmail.com<br>
                Blog:<a href="http://blog.kalen25115.cn/">http://blog.kalen25115.cn/</a>
            </center>
        </ul>
    </div>
  </body>

  <script type="text/javascript">


      var app = new Vue({
          el:" #app",
          data:{
              apps:[],
              msgs:[],
              is_error:false
          },
          methods:{

          }
      });

      $.ajax({
          type: "get",
          url: "/app_list",
          dataType: "json",
          success: function (data) {
              console.log('test');
              app.apps = data.data;
          },
          error: function (e) {
              var comment_list = document.getElementById("comment_list");
              comment_list.innerHTML = "加载评论失败，您的浏览器可能不支持ajax协议";
          }
      });

      $.ajax({
          type: "get",
          url: "/comment_list",
          dataType: "json",
          success: function (data) {
              console.log('test');
              app.msgs = data.data;
              assign_comments(data.data);
              assign_replys();
          },
          error: function (e) {
              var comment_list = document.getElementById("comment_list");
              comment_list.innerHTML = "加载评论失败，您的浏览器可能不支持ajax协议";
          }
      });


  </script>

  
</html>
